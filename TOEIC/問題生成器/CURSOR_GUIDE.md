# CursorでTOEIC問題を生成・自動保存する方法

このガイドでは、**Pythonスクリプトを実行せずに**、CursorチャットだけでTOEIC Part 7の問題を生成し、自動的に`問題/`フォルダに保存する方法を説明します。

## 🎯 基本的な使い方（超シンプル）

### 最も簡単な方法：フォルダを参照するだけ

**デフォルト設定で生成:**
```
@問題生成器 フォルダを参照して、デフォルト設定でTOEIC Part 7の問題を生成してください。
生成された問題は @問題 フォルダに自動保存してください。
```

これだけで、`config.yaml`と`prompts.md`が自動的に読み込まれ、問題が生成・保存されます！

### 個別ファイルを指定する方法

**設定ファイルのみ参照:**
```
@問題生成器/config.yaml のデフォルト設定（4-7行目）を使って、TOEIC Part 7の問題を生成してください。
生成された問題は @問題 フォルダに自動保存してください。
```

**プロンプトテンプレートも参照する場合:**
```
@問題生成器/config.yaml と @問題生成器/prompts.md を参照して、
デフォルト設定でTOEIC Part 7の問題を生成してください。
生成された問題は @問題 フォルダに自動保存してください。
```

これだけで以下が自動実行されます：
1. ✅ `config.yaml`の4-7行目（defaultセクション）を読み込み
2. ✅ 問題生成プロンプトを作成
3. ✅ TOEIC Part 7の問題を生成
4. ✅ 問題番号を自動採番（既存ファイルから最大番号を検出）
5. ✅ `問題/`フォルダに自動保存

## 📋 カスタム条件で生成する

### 例1: パラメータを指定

```
@問題生成器 フォルダを参照して、以下の条件でTOEIC Part 7の問題を生成してください：
- パッセージ数: 2
- 質問数: 5
- 難易度: 中級
- 文章量: 200-400語
- トピック: レストラン

生成された問題は @問題 フォルダに自動保存してください。
```

### 例2: 上級レベルの問題

```
@問題生成器 フォルダを参照して、以下の条件でTOEIC Part 7の問題を生成してください：
- パッセージ数: 3
- 質問数: 7
- 難易度: 上級
- トピック: ビジネス
- 文章量: 400-600語

生成された問題は @問題 フォルダに自動保存してください。
```

## 🔧 利用可能なパラメータ

### パッセージ数
- `1`: 単一パッセージ（広告、記事、通知など）
- `2`: 2つの関連パッセージ（広告とレビュー、メールと返信など）
- `3`: 3つの関連パッセージ（メールチェーン、複数文書など）

### 難易度（TOEICスコア基準）
- `初級`: TOEIC 500点以下レベル。簡単な語彙と短い文章。情報は明示的で直接的。
- `中級`: TOEIC 700点以下レベル。一般的なビジネス語彙と標準的な文章。推論が必要な質問を含む。
- `上級`: TOEIC 700点超レベル。高度な語彙と複雑な文章構造。深い推論と複数情報の統合が必要。

### 文章量（1パッセージあたりの語数範囲）
- `100-200語`: 短い文章。短時間で読める簡潔な内容。
- `200-400語`: 中程度の文章。標準的な長さで詳細な情報を含む。
- `400-600語`: 長い文章。より詳細な情報や背景を含む。
- `ランダム`: 上記のプリセットからランダムに選択。
- カスタム範囲も指定可能（例: `150-250語`、`300-500語`など）

### トピック（オプション）
- ビジネス一般
- レストラン・飲食
- 旅行・ホテル
- 採用・人事
- イベント・セミナー
- 製品・サービス
- 不動産
- 医療・健康
- 教育
- ランダム（指定なし）

### 文書タイプ（オプション）
- ビジネスメール（社内メール・社外メール）
- 書簡・レター
- 社内メモ・通達
- お知らせ・通知文
- 掲示文・案内文
- 広告（商品・サービス・セール）
- キャンペーン／クーポン案内
- 旅行・ツアー案内
- 新聞記事・ニュース記事
- 雑誌風の記事・広報記事
- 申込フォーム・登録フォーム
- 注文書・オーダーフォーム
- アンケート・フィードバックフォーム
- スケジュール表・時刻表
- シフト表
- 価格表・料金表・プラン表
- 会議アジェンダ・イベントプログラム
- Webサイトの説明ページ
- FAQページ
- 利用規約・ポリシー抜粋
- オンラインショップの商品ページ
- レビュー・口コミ・評価
- チャットログ・掲示板の投稿
- 複数文書の組合せ（メール＋広告、案内＋スケジュール等のマルチパッセージ）
- ランダム（上記のリストからランダムに選択）

## 📝 出力形式

生成される問題は以下の形式で保存されます：

```markdown
## 文章1：[文章タイプ]

[文章内容]

---

## 文章2：[文章タイプ]（パッセージ数が2以上の場合）

[文章内容]

---

## 設問

**1. [質問文]**
(A) [選択肢A]
(B) [選択肢B]
(C) [選択肢C]
(D) [選択肢D]

**2. [質問文]**
(A) [選択肢A]
(B) [選択肢B]
(C) [選択肢C]
(D) [選択肢D]

（以降、指定した質問数まで）
```

## 🔄 問題番号の自動採番

- 既存の問題ファイルから最大番号を自動検出
- 新しい問題は連番で自動採番されます
- 例: 既存が `120-124.md` までなら、次は `125-129.md` として保存

## 💡 使用例

### デフォルト設定で生成（最もシンプル）

```
@問題生成器 フォルダを参照して、デフォルト設定でTOEIC Part 7の問題を生成してください。
生成された問題は @問題 フォルダに自動保存してください。
```

### 特定のトピックで生成

```
@問題生成器 フォルダを参照して、以下の条件でTOEIC Part 7の問題を生成してください：
- パッセージ数: 2
- 質問数: 5
- 難易度: 中級
- トピック: 採用・人事
- 文章量: 200-400語

生成された問題は @問題 フォルダに自動保存してください。
```

## 🛠️ トラブルシューティング

### 問題が保存されない場合
- `@問題` フォルダのパスが正しいか確認してください
- ファイル名の形式が `数字-数字.md` になっているか確認してください

### 問題番号が重複する場合
- 既存のファイルを確認してください
- 手動で番号を指定することも可能です

## 📚 関連ファイル

- `問題生成器/config.yaml`: 設定ファイル（4-7行目がデフォルト設定）
- `問題生成器/prompts.md`: プロンプトテンプレート（問題生成時に参照可能）
- `問題/`: 生成された問題の保存先

## 📖 プロンプトテンプレートを参照する

問題生成時に、より詳細なプロンプトテンプレートを参照したい場合は、`prompts.md`を指定してください：

```
@問題生成器/config.yaml と @問題生成器/prompts.md を参照して、
以下の条件でTOEIC Part 7の問題を生成してください：
- パッセージ数: 2
- 質問数: 5
- 難易度: 中級
- トピック: レストラン
- 文章量: 200-400語

生成された問題は @問題 フォルダに自動保存してください。
```

`prompts.md`には、問題生成のための詳細なガイドライン、難易度の説明、文章タイプの提案などが含まれています。

## 🎓 ワークフロー例

### 週次TOEIC部の準備（30秒で完了）

1. **Cursorチャットを開く**
2. **以下の指示をコピペ**
   ```
   @問題生成器 フォルダを参照して、デフォルト設定でTOEIC Part 7の問題を生成してください。
   生成された問題は @問題 フォルダに自動保存してください。
   ```
3. **完了！** 問題が自動生成・保存されます

### カスタム条件で生成する場合

```
@問題生成器 フォルダを参照して、以下の条件でTOEIC Part 7の問題を生成してください：
- パッセージ数: 2
- 質問数: 5
- 難易度: 中級
- 文章量: 200-400語
- トピック: レストラン

生成された問題は @問題 フォルダに自動保存してください。
```

## ⚡ Pythonスクリプトは不要

この方法では、**Pythonスクリプトを実行する必要はありません**。
Cursorチャットに指示するだけで、すべて自動的に処理されます。

## 📊 パーソナライズ問題生成

問題生成時に、問題情報を自動的に記録することで、メンバーごとにパーソナライズされた問題を生成できます。

### 問題生成時に情報を記録

```
@問題生成器 フォルダを参照して、以下の条件でTOEIC Part 7の問題を生成してください：
- パッセージ数: 1
- 質問数: 3
- 難易度: 初級
- トピック: レストラン
- 文章量: 100-200語

生成された問題は @問題 フォルダに自動保存し、
問題情報（問題ID、問題ファイル、難易度、パッセージ数、トピック、問題タイプ）を
@TOEIC部データ/problems_master.csv に追記してください。
```

### メンバーの分析とパーソナライズ

```
@TOEIC部データ/session_results_20251109.csv と 
@TOEIC部データ/problems_master.csv を参照して、
浜脇さんの以下を分析してください：

1. 全体の正答率
2. 問題タイプ別の正答率（弱点を特定）
3. 難易度別の正答率
4. トピック別の正答率

その上で、弱点を克服するためのパーソナライズされた問題を
@問題生成器 フォルダを参照して生成してください。
```

詳細は `@TOEIC部データ/README_パーソナライズ.md` を参照してください。
